# 简介

内部使用Apache Lucene创建索引，同时也使用Apache Lucene对文档进行搜索。

## 1.1 更深入地了解Lucene索引

在理解Lucene之前，先要理解如下概念。

- 文档（document）：索引与搜索的主要数据载体，包含一个或多个字段，存放将要写入索引的或将从索引搜索出来的数据。
- 字段（field）：文档的一个片段，包括字段的名称和内容两个部分。
- 词项（term）：搜索时的一个单位，代表了文本中的一个词。
- 词条（token）：词项在字段文本中的一次出现，包括词项的文本、开始和结束的偏移量以及类型。

**倒排索引**：

倒排索引是一种将词项映射到文档的数据结构。每个词项指向该词项所出现过的文档数，以及在文档中的位置。

**段：**

索引由多个段（segment）组成，每个段只会写入一次但是会被查询多次。索引期间，一个段创建以后就不再被修改。例如，当段中的某个文档被删除，有关它的信息会被单独保存在一个文件中，而段本身并没有被修改。

多个段将会在段合并，增加搜索速度，数量减少，体积增大。

**norm：**

norm是一种与每个被索引文档相关的因子，它存储文档的归一化结果，被用于计算查询的相关得分。

**词项向量：**

词项向量（term vector）是一种针对每个文档的微型倒排索引。词项向量由词项和词项的出现频率结对组成，还可以包括词项的位置信息。Lucene和Elasticsearch默认都禁用词项向量索引，不过要启用诸如关键词高亮之类的功能，就需要启用这个选项。